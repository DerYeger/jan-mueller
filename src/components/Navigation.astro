---
import HeaderLink from '~/components/HeaderLink.astro'
import { cn } from '~/components/ui/cn'
import type { Link } from '~/links'

interface Props {
  links: Link[]
  isSub?: boolean
}

const { links, isSub = false } = Astro.props
---

<nav class={cn('nav-with-indicator flex flex-0 w-full justify-evenly relative')}>
  <div style="opacity: 0;" class="nav-indicator transition-all duration-150 absolute -bottom-2 left-2 h-[3px] bg-current pointer-events-none" aria-hidden="true"></div>
  {links.map((link, index) => (
    <HeaderLink
      href={link.href}
      exact={isSub}
      first={index === 0}
      last={index === links.length - 1}
    >
      {link.label}
    </HeaderLink>
  ))}
</nav>

<style>
  .nav-indicator {
    transition-timing-function: cubic-bezier(0.7, 0, 0.3, 1);
    width: calc(var(--indicator-width, 16px) - 16px);
    transform: translateX(var(--indicator-left, 0));
  }
</style>
