---
import ExampleButton from '~/components/ui/ExampleButton.astro'
import type { Type } from '~/components/ui/ExampleButton.astro'

interface Props {
  size: number
  text: string
  compact?: boolean
  type?: Type
}

const { size, text, compact, type = 'safe' } = Astro.props
---

<ExampleButton id={`benchmark-${size}`} type={type} compact={compact}>{text}</ExampleButton>
<script is:inline define:vars={{ size }}>
  const button = document.getElementById(`benchmark-${size}`)
  button.addEventListener('click', () => {
    const input = document.getElementById('benchmark-size-input')
    if (!input) {
      throw new Error(`Input element not found: benchmark-size-input`)
    }
    if (input.disabled) {
      return
    }
    input.value = size
    const submitButton = document.getElementById('benchmark-submit-button')
    if (!submitButton) {
      throw new Error(`Button element not found: benchmark-submit-button`)
    }
    if (submitButton.disabled) {
      return
    }
    submitButton.click()
  })
</script>
