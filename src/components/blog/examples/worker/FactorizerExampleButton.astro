---
import ExampleButton from '~/components/ui/ExampleButton.astro'
import type { Type } from '~/components/ui/ExampleButton.astro'

interface Props {
  id: string
  value: number
  text: string
  compact?: boolean
  type?: Type
}

const { id, value, text, compact, type } = Astro.props
---

<ExampleButton id={`factorize-${id}-${value}`} type={type} compact={compact}>{text}</ExampleButton>
<script is:inline define:vars={{ id, value }}>
  const button = document.getElementById(`factorize-${id}-${value}`)
  button.addEventListener('click', () => {
    const input = document.getElementById(`${id}-input`)
    if (!input) {
      throw new Error(`Input element not found: ${id}-input`)
    }
    if (input.disabled) {
      return
    }
    input.value = value
    const submitButton = document.getElementById(`${id}-button`)
    if (!submitButton) {
      throw new Error(`Button element not found: ${id}-button`)
    }
    if (submitButton.disabled) {
      return
    }
    submitButton.click()
  })
</script>
