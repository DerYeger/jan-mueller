---
import { cn } from '@components/ui/cn'

interface Props {
  position: 'left' | 'right'
  title: string
  class?: string
}

const { position, title, class: className } = Astro.props

const id = `blog-sidebar-${title}`
---

<aside aria-labelledby={id} class={cn('sticky top-20 max-h-[calc(100dvh-80px)] hidden w-64 xl:flex grow', position === 'left' ? 'justify-end' : 'justify-start', className)}>
  <div class="flex flex-col pt-8 text-sm max-h-full text-black dark:text-inherit">
      <div id={id} class={cn('font-semibold text-lg px-2', position === 'left' ? 'text-right 2xl:mr-12' : 'text-start')}>
        {title}
      </div>
    <nav aria-labelledby={id} class={cn('flex flex-col sidebar px-2 grow gap-1 overflow-y-auto', position === 'left' ? 'text-end' : 'text-start')}>
      <slot />
    </nav>
  </div>
</aside>

<style>
  .sidebar {
    --padding: 1rem;
    padding-block: var(--padding);
    mask-image: linear-gradient(
      to top,
      transparent 0px, black var(--padding),
      black calc(100% - var(--padding)),
      transparent 100%
    );
  }
</style>
