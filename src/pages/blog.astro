---
import DateComponent from '../components/date/DateComponent.astro'
import MainLayout from '../layouts/MainLayout.astro'

// Use Astro.glob() to fetch all posts, and then sort them by date.
const posts = (await Astro.glob('./blog/*.{md,mdx}')).sort(
  (a, b) =>
    new Date(b.frontmatter.publishDate).valueOf() -
    new Date(a.frontmatter.publishDate).valueOf()
)
---

<MainLayout title="Blog — Jan Müller">
  <content>
    <ul class="flex flex-wrap -m-2">
      {
        posts.map((post) => (
          <li class=" p-2 w-1/1 md:w-1/2">
            <a
              href={post.url}
              class="block surface border rounded hover:shadow-xl transition-shadow no-underline"
            >
              <div class="p-4 flex flex-col gap-2">
                <span class="text-xl">{post.frontmatter.title}</span>
                <span class="text-lighter">
                  <DateComponent
                    date={post.frontmatter.publishDate}
                    format="MMM DD, YYYY"
                  />
                </span>
                <span class="text-light">{post.frontmatter.description}</span>
              </div>
            </a>
          </li>
        ))
      }
    </ul>
  </content>
</MainLayout>
